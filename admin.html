<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Dream11 Clone</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        
        .admin-sidebar {
            background-color: var(--primary-color);
            color: white;
            min-height: 100vh;
            padding: 0;
            position: fixed;
            width: 250px;
            box-shadow: 3px 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .admin-content {
            margin-left: 250px;
            padding: 20px;
            min-height: 100vh;
        }
        
        .sidebar-header {
            padding: 20px;
            background-color: rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .sidebar-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .sidebar-menu .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 12px 20px;
            border-left: 4px solid transparent;
            transition: all 0.3s;
        }
        
        .sidebar-menu .nav-link:hover {
            color: white;
            background-color: rgba(255,255,255,0.1);
            border-left-color: var(--secondary-color);
        }
        
        .sidebar-menu .nav-link.active {
            color: white;
            background-color: rgba(255,255,255,0.1);
            border-left-color: var(--secondary-color);
        }
        
        .sidebar-menu .nav-link i {
            width: 25px;
            text-align: center;
            margin-right: 10px;
        }
        
        .admin-header {
            background-color: white;
            padding: 15px 20px;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .stats-card {
            border-radius: 10px;
            color: white;
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
        }
        
        .stats-card i {
            font-size: 2.5rem;
            opacity: 0.8;
        }
        
        .stats-card .stats-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stats-card .stats-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid #dee2e6;
            font-weight: 600;
            padding: 15px 20px;
            border-radius: 10px 10px 0 0 !important;
        }
        
        .table th {
            border-top: none;
            font-weight: 600;
            color: #495057;
        }
        
        .table td {
            vertical-align: middle;
        }
        
        .badge {
            padding: 5px 10px;
            font-weight: 500;
        }
        
        .btn-action {
            padding: 5px 10px;
            font-size: 0.85rem;
        }
        
        .search-box {
            max-width: 300px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .pagination {
            justify-content: center;
        }
        
        .modal-content {
            border-radius: 10px;
            border: none;
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 10px 15px;
        }
        
        @media (max-width: 768px) {
            .admin-sidebar {
                width: 100%;
                position: relative;
                min-height: auto;
            }
            
            .admin-content {
                margin-left: 0;
            }
            
            .sidebar-header {
                padding: 15px;
            }
            
            .sidebar-menu {
                padding: 10px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Sidebar -->
    <div class="admin-sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-lock"></i> Admin Panel</h3>
            <p class="mb-0 small opacity-75">Dream11 Clone</p>
        </div>
        
        <div class="sidebar-menu">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active" href="#" onclick="showAdminSection('dashboard')">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('users')">
                        <i class="fas fa-users"></i> Users
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('matches')">
                        <i class="fas fa-baseball-ball"></i> Matches
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('contests')">
                        <i class="fas fa-trophy"></i> Contests
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('transactions')">
                        <i class="fas fa-exchange-alt"></i> Transactions
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('kyc')">
                        <i class="fas fa-id-card"></i> KYC Requests
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('withdrawals')">
                        <i class="fas fa-money-bill-wave"></i> Withdrawals
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="showAdminSection('settings')">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                </li>
                <li class="nav-item mt-4">
                    <a class="nav-link text-warning" href="index.html" target="_blank">
                        <i class="fas fa-external-link-alt"></i> View User Site
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-danger" href="#" onclick="adminLogout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Admin Content -->
    <div class="admin-content">
        <!-- Dashboard Section -->
        <section id="adminDashboard" class="admin-section">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h4>
                <div class="d-flex align-items-center">
                    <span class="me-3">Last updated: Just now</span>
                    <button class="btn btn-primary btn-sm" onclick="refreshDashboard()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            
            <div class="row">
                <div class="col-xl-3 col-md-6">
                    <div class="stats-card" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="stats-value" id="totalUsers">1,248</div>
                                <div class="stats-label">Total Users</div>
                            </div>
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="mt-3">
                            <small>+12% from last month</small>
                        </div>
                    </div>
                </div>
                
                <div class="col-xl-3 col-md-6">
                    <div class="stats-card" style="background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="stats-value" id="totalDeposits">₹2,45,800</div>
                                <div class="stats-label">Total Deposits</div>
                            </div>
                            <i class="fas fa-rupee-sign"></i>
                        </div>
                        <div class="mt-3">
                            <small>+18% from last month</small>
                        </div>
                    </div>
                </div>
                
                <div class="col-xl-3 col-md-6">
                    <div class="stats-card" style="background: linear-gradient(135deg, #f39c12 0%, #d68910 100%);">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="stats-value" id="activeContests">42</div>
                                <div class="stats-label">Active Contests</div>
                            </div>
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="mt-3">
                            <small>5 ending today</small>
                        </div>
                    </div>
                </div>
                
                <div class="col-xl-3 col-md-6">
                    <div class="stats-card" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="stats-value" id="pendingKYC">18</div>
                                <div class="stats-label">Pending KYC</div>
                            </div>
                            <i class="fas fa-id-card"></i>
                        </div>
                        <div class="mt-3">
                            <small>3 awaiting more than 3 days</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Revenue Overview</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Quick Actions</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="showAdminSection('users')">
                                    <i class="fas fa-user-plus"></i> Add New User
                                </button>
                                <button class="btn btn-success" onclick="showAdminSection('matches')">
                                    <i class="fas fa-plus-circle"></i> Create Match
                                </button>
                                <button class="btn btn-info" onclick="showAdminSection('kyc')">
                                    <i class="fas fa-id-card"></i> Review KYC
                                </button>
                                <button class="btn btn-warning" onclick="showAdminSection('withdrawals')">
                                    <i class="fas fa-money-check"></i> Process Withdrawals
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mt-3">
                        <div class="card-header">
                            <h5 class="mb-0">Recent Activity</h5>
                        </div>
                        <div class="card-body" style="max-height: 300px; overflow-y: auto;">
                            <div class="activity-item mb-3">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-user-circle text-primary"></i>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <small class="text-muted">10:30 AM</small>
                                        <p class="mb-0">New user registered: john_doe</p>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-item mb-3">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-rupee-sign text-success"></i>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <small class="text-muted">09:45 AM</small>
                                        <p class="mb-0">Deposit of ₹500 by user456</p>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-item mb-3">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-id-card text-warning"></i>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <small class="text-muted">09:15 AM</small>
                                        <p class="mb-0">KYC submitted by user789</p>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-item mb-3">
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <i class="fas fa-trophy text-info"></i>
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <small class="text-muted">Yesterday, 8:30 PM</small>
                                        <p class="mb-0">Contest "Mega Contest" completed</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Users Management Section -->
        <section id="adminUsers" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-users"></i> User Management</h4>
                <div class="d-flex">
                    <div class="search-box me-2">
                        <input type="text" class="form-control form-control-sm" placeholder="Search users..." id="searchUsers">
                    </div>
                    <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addUserModal">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">All Users</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Email</th>
                                    <th>Balance</th>
                                    <th>KYC Status</th>
                                    <th>Joined</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTable">
                                <!-- Users will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                    
                    <nav aria-label="Page navigation">
                        <ul class="pagination" id="usersPagination">
                            <!-- Pagination will be loaded dynamically -->
                        </ul>
                    </nav>
                </div>
            </div>
        </section>
        
        <!-- Matches Management Section -->
        <section id="adminMatches" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-baseball-ball"></i> Matches Management</h4>
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addMatchModal">
                    <i class="fas fa-plus"></i> Add Match
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">All Matches</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Match</th>
                                    <th>Sport</th>
                                    <th>Venue</th>
                                    <th>Date & Time</th>
                                    <th>Status</th>
                                    <th>Contests</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="matchesTable">
                                <!-- Matches will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Contests Management Section -->
        <section id="adminContests" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-trophy"></i> Contests Management</h4>
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addContestModal">
                    <i class="fas fa-plus"></i> Add Contest
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">All Contests</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Contest Name</th>
                                    <th>Match</th>
                                    <th>Entry Fee</th>
                                    <th>Prize Pool</th>
                                    <th>Spots</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="contestsTable">
                                <!-- Contests will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Transactions Management Section -->
        <section id="adminTransactions" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-exchange-alt"></i> Transactions Management</h4>
                <div class="d-flex">
                    <div class="input-group input-group-sm me-2" style="width: 200px;">
                        <input type="date" class="form-control" id="transactionDateFilter">
                    </div>
                    <select class="form-select form-select-sm me-2" style="width: 150px;" id="transactionTypeFilter">
                        <option value="">All Types</option>
                        <option value="deposit">Deposits</option>
                        <option value="withdrawal">Withdrawals</option>
                        <option value="contest">Contests</option>
                        <option value="winning">Winnings</option>
                    </select>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">All Transactions</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Transaction ID</th>
                                    <th>User</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adminTransactionsTable">
                                <!-- Transactions will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- KYC Management Section -->
        <section id="adminKYC" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-id-card"></i> KYC Verification Requests</h4>
                <div class="badge bg-warning">18 Pending</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Pending KYC Requests</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Request ID</th>
                                    <th>User</th>
                                    <th>Document Type</th>
                                    <th>Submitted On</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="kycTable">
                                <!-- KYC requests will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Withdrawals Management Section -->
        <section id="adminWithdrawals" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-money-bill-wave"></i> Withdrawal Requests</h4>
                <div class="badge bg-warning">5 Pending</div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Pending Withdrawals</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Request ID</th>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Bank Details</th>
                                    <th>Requested On</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="withdrawalsTable">
                                <!-- Withdrawal requests will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Settings Section -->
        <section id="adminSettings" class="admin-section d-none">
            <div class="admin-header">
                <h4 class="mb-0"><i class="fas fa-cog"></i> System Settings</h4>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">General Settings</h5>
                        </div>
                        <div class="card-body">
                            <form id="generalSettingsForm">
                                <div class="mb-3">
                                    <label class="form-label">Site Name</label>
                                    <input type="text" class="form-control" value="Dream11 Clone">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Site URL</label>
                                    <input type="text" class="form-control" value="https://dream11clone.com">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Support Email</label>
                                    <input type="email" class="form-control" value="support@dream11clone.com">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Support Phone</label>
                                    <input type="text" class="form-control" value="+91 9876543210">
                                </div>
                                <button type="button" class="btn btn-primary" onclick="saveGeneralSettings()">Save Settings</button>
                            </form>
                        </div>
                    </div>
                    
                    <div class="card mt-3">
                        <div class="card-header">
                            <h5 class="mb-0">Commission Settings</h5>
                        </div>
                        <div class="card-body">
                            <form id="commissionSettingsForm">
                                <div class="mb-3">
                                    <label class="form-label">Platform Commission (%)</label>
                                    <input type="number" class="form-control" value="15" min="0" max="50" step="0.1">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Minimum Withdrawal Amount</label>
                                    <input type="number" class="form-control" value="100" min="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Maximum Withdrawal Amount</label>
                                    <input type="number" class="form-control" value="50000" min="1000">
                                </div>
                                <button type="button" class="btn btn-primary" onclick="saveCommissionSettings()">Save Settings</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Payment Gateway Settings</h5>
                        </div>
                        <div class="card-body">
                            <form id="paymentSettingsForm">
                                <div class="mb-3">
                                    <label class="form-label">Razorpay Key ID</label>
                                    <input type="text" class="form-control" value="rzp_test_**********">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Razorpay Key Secret</label>
                                    <input type="password" class="form-control" value="************">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Paytm Merchant ID</label>
                                    <input type="text" class="form-control" value="************">
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="enableTestMode" checked>
                                    <label class="form-check-label" for="enableTestMode">
                                        Enable Test Mode
                                    </label>
                                </div>
                                <button type="button" class="btn btn-primary" onclick="savePaymentSettings()">Save Settings</button>
                            </form>
                        </div>
                    </div>
                    
                    <div class="card mt-3">
                        <div class="card-header bg-danger text-white">
                            <h5 class="mb-0">Danger Zone</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted">Be careful with these actions. They cannot be undone.</p>
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-danger" onclick="clearAllData()">
                                    <i class="fas fa-trash"></i> Clear All Data
                                </button>
                                <button class="btn btn-outline-danger" onclick="resetSystem()">
                                    <i class="fas fa-redo"></i> Reset System
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Admin Modals -->
    
    <!-- Add User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addUserForm">
                        <div class="mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Initial Balance (₹)</label>
                            <input type="number" class="form-control" value="0" min="0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">User Role</label>
                            <select class="form-control">
                                <option value="user">User</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addNewUser()">Add User</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Match Modal -->
    <div class="modal fade" id="addMatchModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Match</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addMatchForm">
                        <div class="mb-3">
                            <label class="form-label">Sport</label>
                            <select class="form-control">
                                <option value="cricket">Cricket</option>
                                <option value="football">Football</option>
                                <option value="basketball">Basketball</option>
                                <option value="kabaddi">Kabaddi</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Team 1</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Team 2</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Venue</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Match Date & Time</label>
                            <input type="datetime-local" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-control">
                                <option value="upcoming">Upcoming</option>
                                <option value="live">Live</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addNewMatch()">Add Match</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Contest Modal -->
    <div class="modal fade" id="addContestModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Contest</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addContestForm">
                        <div class="mb-3">
                            <label class="form-label">Contest Name</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Select Match</label>
                            <select class="form-control" required>
                                <option value="">Select a match</option>
                                <option value="1">IND vs AUS</option>
                                <option value="2">MCI vs MUN</option>
                                <option value="3">LAL vs GSW</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Entry Fee (₹)</label>
                            <input type="number" class="form-control" required min="0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Prize Pool (₹)</label>
                            <input type="number" class="form-control" required min="0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Max Players</label>
                            <input type="number" class="form-control" required min="2" value="100">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Contest Type</label>
                            <select class="form-control">
                                <option value="public">Public</option>
                                <option value="private">Private</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="addNewContest()">Add Contest</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- View User Details Modal -->
    <div class="modal fade" id="viewUserModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">User Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="userDetailsContent">
                    <!-- User details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Admin Application State
        const adminState = {
            users: [],
            matches: [],
            contests: [],
            transactions: [],
            kycRequests: [],
            withdrawalRequests: [],
            currentPage: 1,
            itemsPerPage: 10
        };

        // Initialize admin panel
        document.addEventListener('DOMContentLoaded', function() {
            initAdminPanel();
        });

        // Initialize admin panel
        function initAdminPanel() {
            loadAdminData();
            initAdminCharts();
            renderUsersTable();
            renderMatchesTable();
            renderContestsTable();
            renderTransactionsTable();
            renderKYCRequests();
            renderWithdrawalRequests();
        }

        // Load admin data
        function loadAdminData() {
            // Load users
            adminState.users = [
                {
                    id: 1,
                    name: "John Doe",
                    username: "john_doe",
                    email: "john@example.com",
                    balance: 500,
                    kycStatus: "verified",
                    joinedDate: "2023-05-15",
                    status: "active",
                    isAdmin: false
                },
                {
                    id: 2,
                    name: "Jane Smith",
                    username: "jane_smith",
                    email: "jane@example.com",
                    balance: 1200,
                    kycStatus: "pending",
                    joinedDate: "2023-06-01",
                    status: "active",
                    isAdmin: false
                },
                {
                    id: 3,
                    name: "Admin User",
                    username: "admin",
                    email: "admin@dream11clone.com",
                    balance: 0,
                    kycStatus: "verified",
                    joinedDate: "2023-01-01",
                    status: "active",
                    isAdmin: true
                }
            ];
            
            // Load matches
            adminState.matches = [
                {
                    id: 1,
                    team1: "IND",
                    team2: "AUS",
                    sport: "cricket",
                    venue: "Feroz Shah Kotla, Delhi",
                    date: "2023-06-20T14:30:00",
                    status: "upcoming",
                    contests: 3
                },
                {
                    id: 2,
                    team1: "MCI",
                    team2: "MUN",
                    sport: "football",
                    venue: "Etihad Stadium",
                    date: "2023-06-20T17:00:00",
                    status: "upcoming",
                    contests: 2
                }
            ];
            
            // Load contests
            adminState.contests = [
                {
                    id: 1,
                    name: "Mega Contest",
                    matchId: 1,
                    entryFee: 39,
                    prizePool: 50000,
                    maxPlayers: 100,
                    currentPlayers: 78,
                    status: "open"
                },
                {
                    id: 2,
                    name: "Beginner's Luck",
                    matchId: 1,
                    entryFee: 10,
                    prizePool: 1000,
                    maxPlayers: 100,
                    currentPlayers: 45,
                    status: "open"
                }
            ];
            
            // Load transactions
            adminState.transactions = [
                {
                    id: "TXN001",
                    userId: 1,
                    userName: "John Doe",
                    type: "deposit",
                    amount: 500,
                    date: "2023-06-15",
                    status: "completed"
                },
                {
                    id: "TXN002",
                    userId: 2,
                    userName: "Jane Smith",
                    type: "withdrawal",
                    amount: 200,
                    date: "2023-06-14",
                    status: "pending"
                }
            ];
            
            // Load KYC requests
            adminState.kycRequests = [
                {
                    id: "KYC001",
                    userId: 2,
                    userName: "Jane Smith",
                    documentType: "aadhar",
                    submittedDate: "2023-06-10",
                    status: "pending"
                },
                {
                    id: "KYC002",
                    userId: 4,
                    userName: "Bob Johnson",
                    documentType: "pan",
                    submittedDate: "2023-06-12",
                    status: "pending"
                }
            ];
            
            // Load withdrawal requests
            adminState.withdrawalRequests = [
                {
                    id: "WDR001",
                    userId: 2,
                    userName: "Jane Smith",
                    amount: 200,
                    bankDetails: "HDFC Bank ****5678",
                    requestedDate: "2023-06-14",
                    status: "pending"
                }
            ];
        }

        // Show admin section
        function showAdminSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.add('d-none');
            });
            
            // Show selected section
            document.getElementById(`admin${sectionId.charAt(0).toUpperCase() + sectionId.slice(1)}`).classList.remove('d-none');
            
            // Update active menu item
            document.querySelectorAll('.sidebar-menu .nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Find and activate the corresponding menu item
            const menuItem = document.querySelector(`.sidebar-menu .nav-link[onclick*="${sectionId}"]`);
            if (menuItem) {
                menuItem.classList.add('active');
            }
        }

        // Initialize admin charts
        function initAdminCharts() {
            // Revenue chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Revenue (₹)',
                        data: [15000, 22000, 18000, 25000, 30000, 28000],
                        backgroundColor: 'rgba(52, 152, 219, 0.7)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '₹' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Render users table
        function renderUsersTable() {
            const container = document.getElementById('usersTable');
            container.innerHTML = '';
            
            const startIndex = (adminState.currentPage - 1) * adminState.itemsPerPage;
            const endIndex = startIndex + adminState.itemsPerPage;
            const usersToShow = adminState.users.slice(startIndex, endIndex);
            
            usersToShow.forEach(user => {
                const row = document.createElement('tr');
                const kycBadge = user.kycStatus === 'verified' ? 
                    '<span class="badge bg-success">Verified</span>' : 
                    '<span class="badge bg-warning">Pending</span>';
                
                const statusBadge = user.status === 'active' ? 
                    '<span class="badge bg-success">Active</span>' : 
                    '<span class="badge bg-danger">Blocked</span>';
                
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=3498db&color=fff&size=32" 
                                 class="user-avatar me-2">
                            <div>
                                <div>${user.name}</div>
                                <small class="text-muted">@${user.username}</small>
                            </div>
                        </div>
                    </td>
                    <td>${user.email}</td>
                    <td>₹${user.balance}</td>
                    <td>${kycBadge}</td>
                    <td>${user.joinedDate}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary btn-action" onclick="viewUserDetails(${user.id})">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-warning btn-action" onclick="editUser(${user.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        ${user.status === 'active' ? 
                            `<button class="btn btn-sm btn-outline-danger btn-action" onclick="blockUser(${user.id})">
                                <i class="fas fa-ban"></i>
                            </button>` :
                            `<button class="btn btn-sm btn-outline-success btn-action" onclick="unblockUser(${user.id})">
                                <i class="fas fa-check"></i>
                            </button>`
                        }
                    </td>
                `;
                container.appendChild(row);
            });
            
            // Render pagination
            renderPagination(adminState.users.length);
        }

        // Render pagination
        function renderPagination(totalItems) {
            const totalPages = Math.ceil(totalItems / adminState.itemsPerPage);
            const container = document.getElementById('usersPagination');
            container.innerHTML = '';
            
            // Previous button
            const prevLi = document.createElement('li');
            prevLi.className = `page-item ${adminState.currentPage === 1 ? 'disabled' : ''}`;
            prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${adminState.currentPage - 1})">Previous</a>`;
            container.appendChild(prevLi);
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                const li = document.createElement('li');
                li.className = `page-item ${adminState.currentPage === i ? 'active' : ''}`;
                li.innerHTML = `<a class="page-link" href="#" onclick="changePage(${i})">${i}</a>`;
                container.appendChild(li);
            }
            
            // Next button
            const nextLi = document.createElement('li');
            nextLi.className = `page-item ${adminState.currentPage === totalPages ? 'disabled' : ''}`;
            nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${adminState.currentPage + 1})">Next</a>`;
            container.appendChild(nextLi);
        }

        // Change page
        function changePage(page) {
            if (page < 1 || page > Math.ceil(adminState.users.length / adminState.itemsPerPage)) {
                return;
            }
            
            adminState.currentPage = page;
            renderUsersTable();
        }

        // Render matches table
        function renderMatchesTable() {
            const container = document.getElementById('matchesTable');
            container.innerHTML = '';
            
            adminState.matches.forEach(match => {
                const row = document.createElement('tr');
                const statusBadge = match.status === 'upcoming' ? 
                    '<span class="badge bg-warning">Upcoming</span>' : 
                    match.status === 'live' ? 
                    '<span class="badge bg-success">Live</span>' : 
                    '<span class="badge bg-secondary">Completed</span>';
                
                const sportIcon = match.sport === 'cricket' ? '<i class="fas fa-baseball-ball text-danger"></i>' :
                                match.sport === 'football' ? '<i class="fas fa-futbol text-primary"></i>' :
                                '<i class="fas fa-basketball-ball text-warning"></i>';
                
                row.innerHTML = `
                    <td>${match.id}</td>
                    <td>
                        <div>${match.team1} vs ${match.team2}</div>
                        <small class="text-muted">${sportIcon} ${match.sport.toUpperCase()}</small>
                    </td>
                    <td>${match.sport.charAt(0).toUpperCase() + match.sport.slice(1)}</td>
                    <td>${match.venue}</td>
                    <td>${new Date(match.date).toLocaleString()}</td>
                    <td>${statusBadge}</td>
                    <td>${match.contests}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary btn-action" onclick="editMatch(${match.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger btn-action" onclick="deleteMatch(${match.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }

        // Render contests table
        function renderContestsTable() {
            const container = document.getElementById('contestsTable');
            container.innerHTML = '';
            
            adminState.contests.forEach(contest => {
                const match = adminState.matches.find(m => m.id === contest.matchId);
                const progress = (contest.currentPlayers / contest.maxPlayers) * 100;
                const statusBadge = contest.status === 'open' ? 
                    '<span class="badge bg-success">Open</span>' : 
                    contest.status === 'closed' ? 
                    '<span class="badge bg-warning">Closed</span>' : 
                    '<span class="badge bg-secondary">Completed</span>';
                
                row.innerHTML = `
                    <td>${contest.id}</td>
                    <td>${contest.name}</td>
                    <td>${match ? `${match.team1} vs ${match.team2}` : 'N/A'}</td>
                    <td>₹${contest.entryFee}</td>
                    <td>₹${contest.prizePool.toLocaleString()}</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="me-2">${contest.currentPlayers}/${contest.maxPlayers}</div>
                            <div class="progress flex-grow-1" style="height: 6px;">
                                <div class="progress-bar bg-success" style="width: ${progress}%"></div>
                            </div>
                        </div>
                    </td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary btn-action" onclick="editContest(${contest.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger btn-action" onclick="deleteContest(${contest.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }

        // Render transactions table
        function renderTransactionsTable() {
            const container = document.getElementById('adminTransactionsTable');
            container.innerHTML = '';
            
            adminState.transactions.forEach(transaction => {
                const row = document.createElement('tr');
                const typeBadge = transaction.type === 'deposit' ? 
                    '<span class="badge bg-success">Deposit</span>' : 
                    transaction.type === 'withdrawal' ? 
                    '<span class="badge bg-warning">Withdrawal</span>' :
                    transaction.type === 'contest' ? 
                    '<span class="badge bg-info">Contest</span>' :
                    '<span class="badge bg-primary">Winning</span>';
                
                const amountClass = transaction.amount > 0 ? 'text-success' : 'text-danger';
                const amountSign = transaction.amount > 0 ? '+' : '';
                const statusBadge = transaction.status === 'completed' ? 
                    '<span class="badge bg-success">Completed</span>' : 
                    transaction.status === 'pending' ? 
                    '<span class="badge bg-warning">Pending</span>' : 
                    '<span class="badge bg-danger">Failed</span>';
                
                row.innerHTML = `
                    <td>${transaction.id}</td>
                    <td>${transaction.userName}</td>
                    <td>${typeBadge}</td>
                    <td class="${amountClass}">${amountSign}₹${Math.abs(transaction.amount)}</td>
                    <td>${transaction.date}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary btn-action" onclick="viewTransaction('${transaction.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }

        // Render KYC requests
        function renderKYCRequests() {
            const container = document.getElementById('kycTable');
            container.innerHTML = '';
            
            adminState.kycRequests.forEach(request => {
                const row = document.createElement('tr');
                const statusBadge = request.status === 'pending' ? 
                    '<span class="badge bg-warning">Pending</span>' : 
                    request.status === 'verified' ? 
                    '<span class="badge bg-success">Verified</span>' : 
                    '<span class="badge bg-danger">Rejected</span>';
                
                row.innerHTML = `
                    <td>${request.id}</td>
                    <td>${request.userName}</td>
                    <td>${request.documentType.toUpperCase()}</td>
                    <td>${request.submittedDate}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-success btn-action" onclick="approveKYC('${request.id}')">
                            <i class="fas fa-check"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger btn-action" onclick="rejectKYC('${request.id}')">
                            <i class="fas fa-times"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-primary btn-action" onclick="viewKYCDetails('${request.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }

        // Render withdrawal requests
        function renderWithdrawalRequests() {
            const container = document.getElementById('withdrawalsTable');
            container.innerHTML = '';
            
            adminState.withdrawalRequests.forEach(request => {
                const row = document.createElement('tr');
                const statusBadge = request.status === 'pending' ? 
                    '<span class="badge bg-warning">Pending</span>' : 
                    request.status === 'processed' ? 
                    '<span class="badge bg-success">Processed</span>' : 
                    '<span class="badge bg-danger">Rejected</span>';
                
                row.innerHTML = `
                    <td>${request.id}</td>
                    <td>${request.userName}</td>
                    <td>₹${request.amount}</td>
                    <td>${request.bankDetails}</td>
                    <td>${request.requestedDate}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-success btn-action" onclick="approveWithdrawal('${request.id}')">
                            <i class="fas fa-check"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger btn-action" onclick="rejectWithdrawal('${request.id}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </td>
                `;
                container.appendChild(row);
            });
        }

        // View user details
        function viewUserDetails(userId) {
            const user = adminState.users.find(u => u.id === userId);
            if (!user) return;
            
            const content = document.getElementById('userDetailsContent');
            content.innerHTML = `
                <div class="row">
                    <div class="col-md-4 text-center">
                        <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=3498db&color=fff&size=150" 
                             class="rounded-circle img-thumbnail mb-3">
                        <h4>${user.name}</h4>
                        <p class="text-muted">@${user.username}</p>
                        ${user.isAdmin ? '<span class="badge bg-danger">Admin</span>' : ''}
                    </div>
                    <div class="col-md-8">
                        <table class="table">
                            <tr>
                                <th width="30%">Email:</th>
                                <td>${user.email}</td>
                            </tr>
                            <tr>
                                <th>Balance:</th>
                                <td>₹${user.balance}</td>
                            </tr>
                            <tr>
                                <th>KYC Status:</th>
                                <td>${user.kycStatus === 'verified' ? '<span class="badge bg-success">Verified</span>' : '<span class="badge bg-warning">Pending</span>'}</td>
                            </tr>
                            <tr>
                                <th>Account Status:</th>
                                <td>${user.status === 'active' ? '<span class="badge bg-success">Active</span>' : '<span class="badge bg-danger">Blocked</span>'}</td>
                            </tr>
                            <tr>
                                <th>Joined Date:</th>
                                <td>${user.joinedDate}</td>
                            </tr>
                            <tr>
                                <th>Total Contests:</th>
                                <td>12</td>
                            </tr>
                            <tr>
                                <th>Total Winnings:</th>
                                <td>₹2,450</td>
                            </tr>
                        </table>
                    </div>
                </div>
            `;
            
            const modal = new bootstrap.Modal(document.getElementById('viewUserModal'));
            modal.show();
        }

        // Edit user
        function editUser(userId) {
            alert(`Edit user ${userId} - This would open an edit form in a real application`);
        }

        // Block user
        function blockUser(userId) {
            if (confirm('Are you sure you want to block this user?')) {
                const user = adminState.users.find(u => u.id === userId);
                if (user) {
                    user.status = 'blocked';
                    alert('User blocked successfully');
                    renderUsersTable();
                }
            }
        }

        // Unblock user
        function unblockUser(userId) {
            if (confirm('Are you sure you want to unblock this user?')) {
                const user = adminState.users.find(u => u.id === userId);
                if (user) {
                    user.status = 'active';
                    alert('User unblocked successfully');
                    renderUsersTable();
                }
            }
        }

        // Edit match
        function editMatch(matchId) {
            alert(`Edit match ${matchId} - This would open an edit form in a real application`);
        }

        // Delete match
        function deleteMatch(matchId) {
            if (confirm('Are you sure you want to delete this match? This will also delete all associated contests.')) {
                adminState.matches = adminState.matches.filter(m => m.id !== matchId);
                alert('Match deleted successfully');
                renderMatchesTable();
            }
        }

        // Edit contest
        function editContest(contestId) {
            alert(`Edit contest ${contestId} - This would open an edit form in a real application`);
        }

        // Delete contest
        function deleteContest(contestId) {
            if (confirm('Are you sure you want to delete this contest?')) {
                adminState.contests = adminState.contests.filter(c => c.id !== contestId);
                alert('Contest deleted successfully');
                renderContestsTable();
            }
        }

        // View transaction
        function viewTransaction(transactionId) {
            alert(`View transaction ${transactionId} - This would show transaction details in a real application`);
        }

        // Approve KYC
        function approveKYC(kycId) {
            if (confirm('Approve this KYC request?')) {
                const request = adminState.kycRequests.find(k => k.id === kycId);
                if (request) {
                    request.status = 'verified';
                    
                    // Update user KYC status
                    const user = adminState.users.find(u => u.id === request.userId);
                    if (user) {
                        user.kycStatus = 'verified';
                    }
                    
                    alert('KYC approved successfully');
                    renderKYCRequests();
                    renderUsersTable();
                }
            }
        }

        // Reject KYC
        function rejectKYC(kycId) {
            if (confirm('Reject this KYC request?')) {
                const request = adminState.kycRequests.find(k => k.id === kycId);
                if (request) {
                    request.status = 'rejected';
                    alert('KYC rejected');
                    renderKYCRequests();
                }
            }
        }

        // View KYC details
        function viewKYCDetails(kycId) {
            alert(`View KYC details for ${kycId} - This would show uploaded documents in a real application`);
        }

        // Approve withdrawal
        function approveWithdrawal(withdrawalId) {
            if (confirm('Approve this withdrawal request?')) {
                const request = adminState.withdrawalRequests.find(w => w.id === withdrawalId);
                if (request) {
                    request.status = 'processed';
                    
                    // Update transaction status
                    const transaction = adminState.transactions.find(t => 
                        t.type === 'withdrawal' && t.amount === -request.amount
                    );
                    if (transaction) {
                        transaction.status = 'completed';
                    }
                    
                    alert('Withdrawal approved and processed');
                    renderWithdrawalRequests();
                    renderTransactionsTable();
                }
            }
        }

        // Reject withdrawal
        function rejectWithdrawal(withdrawalId) {
            if (confirm('Reject this withdrawal request?')) {
                const request = adminState.withdrawalRequests.find(w => w.id === withdrawalId);
                if (request) {
                    request.status = 'rejected';
                    
                    // Update transaction status and refund user
                    const transaction = adminState.transactions.find(t => 
                        t.type === 'withdrawal' && t.amount === -request.amount
                    );
                    if (transaction) {
                        transaction.status = 'failed';
                    }
                    
                    // Refund user balance
                    const user = adminState.users.find(u => u.id === request.userId);
                    if (user) {
                        user.balance += request.amount;
                    }
                    
                    alert('Withdrawal rejected and amount refunded to user');
                    renderWithdrawalRequests();
                    renderTransactionsTable();
                    renderUsersTable();
                }
            }
        }

        // Add new user
        function addNewUser() {
            const form = document.getElementById('addUserForm');
            if (!form.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            // In a real app, this would send data to server
            alert('User added successfully');
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addUserModal'));
            modal.hide();
            
            // Reset form
            form.reset();
            
            // Refresh users table
            renderUsersTable();
        }

        // Add new match
        function addNewMatch() {
            const form = document.getElementById('addMatchForm');
            if (!form.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            // In a real app, this would send data to server
            alert('Match added successfully');
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addMatchModal'));
            modal.hide();
            
            // Reset form
            form.reset();
            
            // Refresh matches table
            renderMatchesTable();
        }

        // Add new contest
        function addNewContest() {
            const form = document.getElementById('addContestForm');
            if (!form.checkValidity()) {
                alert('Please fill in all required fields');
                return;
            }
            
            // In a real app, this would send data to server
            alert('Contest added successfully');
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addContestModal'));
            modal.hide();
            
            // Reset form
            form.reset();
            
            // Refresh contests table
            renderContestsTable();
        }

        // Save general settings
        function saveGeneralSettings() {
            alert('General settings saved successfully');
        }

        // Save commission settings
        function saveCommissionSettings() {
            alert('Commission settings saved successfully');
        }

        // Save payment settings
        function savePaymentSettings() {
            alert('Payment settings saved successfully');
        }

        // Clear all data
        function clearAllData() {
            if (confirm('WARNING: This will delete ALL data including users, matches, contests, and transactions. This action cannot be undone. Are you sure?')) {
                if (prompt('Type "DELETE ALL" to confirm:') === 'DELETE ALL') {
                    // Clear all data
                    adminState.users = [];
                    adminState.matches = [];
                    adminState.contests = [];
                    adminState.transactions = [];
                    adminState.kycRequests = [];
                    adminState.withdrawalRequests = [];
                    
                    // Clear localStorage
                    localStorage.clear();
                    
                    alert('All data has been cleared');
                    
                    // Refresh all tables
                    renderUsersTable();
                    renderMatchesTable();
                    renderContestsTable();
                    renderTransactionsTable();
                    renderKYCRequests();
                    renderWithdrawalRequests();
                }
            }
        }

        // Reset system
        function resetSystem() {
            if (confirm('WARNING: This will reset the entire system to factory settings. All data will be lost. Are you sure?')) {
                if (prompt('Type "RESET SYSTEM" to confirm:') === 'RESET SYSTEM') {
                    // Reset system
                    localStorage.clear();
                    sessionStorage.clear();
                    
                    alert('System reset successfully. The page will now reload.');
                    window.location.reload();
                }
            }
        }

        // Refresh dashboard
        function refreshDashboard() {
            // Update stats with random values for demo
            document.getElementById('totalUsers').textContent = (1248 + Math.floor(Math.random() * 20)).toLocaleString();
            document.getElementById('totalDeposits').textContent = `₹${(245800 + Math.floor(Math.random() * 10000)).toLocaleString()}`;
            document.getElementById('activeContests').textContent = 42 + Math.floor(Math.random() * 5);
            document.getElementById('pendingKYC').textContent = 18 + Math.floor(Math.random() * 3);
            
            alert('Dashboard refreshed successfully');
        }

        // Admin logout
        function adminLogout() {
            if (confirm('Are you sure you want to logout?')) {
                alert('Logged out successfully');
                // In a real app, you would redirect to login page
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
  </html>
